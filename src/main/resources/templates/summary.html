<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Přehled zápasu</title>
    <link rel="stylesheet" th:href="@{/css/default.css}">
    <link rel="stylesheet" th:href="@{/css/summary/style.css}">
</head>
<body>
    <div class="sum">
        <div class="header">
            Zápas: <span th:text="${game.game.team.name}">Tým 1</span> - <span th:text="${game.game?.opponent}">Soupeř 1</span><br>
            <span th:text="${#temporals.format(game.game?.date,'dd.MM.yyyy')}+', '+${game.game.time}">XX.XX.XXXX, XXXX</span> - <span th:text="${game.game?.venue}">Místo XXX</span>
        </div>
        <div class="score" >
            <th:block th:text="${game.goalsScored}+':'+${game.goalsConceded}"/> <br>
            <span class="period-score">(<th:block th:text="${@util.periodScoreToText(game.periodGoals, game.game.periods)}"/>)</span>
        </div>
        <div class="stas-sum">
            <table>
                <thead>
                    <tr class="team-header">
                         <th th:colspan="${game.game.periods+2}" th:text="${game.game.team.name}">Tým 1</th>
                        <th>&nbsp;</th>
                         <th th:colspan="${game.game.periods+2}" th:text="${game.game.opponent}">Soupeř 1</th>
                    </tr>
                    <tr>
                        <th th:each="shots, index : ${gameStats.periodStats}" th:if="${index.index+1 <= game.game.periods}" th:text="${index.index+1}+'.'"></th>
                        <th>PR</th>
                        <th>Celkem</th>
                        <th>&nbsp;</th>
                        <th>Celkem</th>
                        <th th:each="shots, index : ${gameStats.periodStats}" th:if="${index.index+1 <= game.game.periods}" th:text="${index.index+1}+'.'"></th>
                        <th>PR</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td th:each="shots, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].teamShots!=null?gameStats.periodStats[iter.index].teamShots:''}">0</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamShots}">00</td>
                        <td>Střely na branku</td>
                        <td class="sum-col"  th:text="${gameStats.totalStats.opponentShots!=null?gameStats.totalStats.opponentShots:0}">00</td>
                        <td th:each="shots, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].opponentShots!=null?gameStats.periodStats[iter.index].opponentShots:''}">0</td>
                    </tr>
                    <tr>
                        <td th:each="saves, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].teamSaves!=null?gameStats.periodStats[iter.index].teamSaves:''}">0</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamSaves}">00</td>
                        <td>Záashy brankářů</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.opponentSaves}">00</td>
                        <td th:each="saves, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].opponentSaves!=null?gameStats.periodStats[iter.index].opponentSaves:''}">0</td>
                    </tr>
                    <tr>
                        <td th:each="penalties, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].teamPIM!=null?gameStats.periodStats[iter.index].teamPIM:''}">0</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamPIM}">00</td>
                        <td>Trestné minuty</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.opponentPIM}">00</td>
                        <td th:each="penalties, iter : ${gameStats.periodStats}" th:text="${gameStats.periodStats[iter.index].opponentPIM!=null?gameStats.periodStats[iter.index].opponentPIM:''}">0</td>
                    </tr>
                    <tr>
                        <td class="bg-none" th:colspan="${game.game.periods+1}">&nbsp;</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamShotEfficiency!=null?gameStats.totalStats.teamShotEfficiency+ ' %':'--' }">00</td>
                        <td>Úspěšnost střelby</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.opponentShotEfficiency!=null?gameStats.totalStats.opponentShotEfficiency+ ' %':'--' }">00</td>
                        <td class="bg-none"  th:colspan="${game.game.periods+1}">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="bg-none" th:colspan="${game.game.periods+1}">&nbsp;</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamPPEfficiency!=null?gameStats.totalStats.teamPPEfficiency+ ' %':'--' }">00</td>
                        <td>Úspěšnost přesilovek</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.opponentPPEfficiency!=null?gameStats.totalStats.opponentPPEfficiency+ ' %':'--' }">00</td>
                        <td class="bg-none"  th:colspan="${game.game.periods+1}">&nbsp;</td>
                    </tr>
                    <tr>
                        <td class="bg-none" th:colspan="${game.game.periods+1}">&nbsp;</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.teamSHEfficiency!=null?gameStats.totalStats.teamSHEfficiency+ ' %':'--' }">00</td>
                        <td>Úspěšnost oslabení</td>
                        <td class="sum-col" th:text="${gameStats.totalStats.opponentSHEfficiency!=null?gameStats.totalStats.opponentSHEfficiency+ ' %':'--' }">00</td>
                        <td class="bg-none"  th:colspan="${game.game.periods+1}">&nbsp;</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="game-events">
        <h3>Herní události</h3>
        <table id="events">
            <th:block  th:each="periodEvents : ${game.events}">

            <thead>
            <tr>
                <th colspan="3" th:text="${@util.periodWithName(periodEvents.period, game.game.periods)}"></th>

            </tr>
            </thead>

            <tbody>


            <tr th:each="event : ${periodEvents.events}">
                <td th:text="${@util.secondsToGameTime(event.time)}">00:00</td>

                <td th:switch="${event.getType()}">
                    <span th:case="'GoalScored'">Vstřelený gól</span>
                    <span th:case="'GoalConceded'">Obdržený gól</span>
                    <span th:case="'Penalty'">Vyloučení</span>
                    <span th:case="'OpponentPenalty'">Vyloučení soupeře</span>
                </td>

                <td th:switch="${event.getType()}">

                    <!-- GoalScored -->
                    <th:block th:case="'GoalScored'">
                        <th:block th:text="'Střelec: ' + ${event.scorer != null ? event.scorer?.gameNumber : '--'}"></th:block>
                        <th:block>| Asistence: <th:block th:text="${@util.joinGameNumbersFromRoster(event.assists)}"></th:block></th:block><br>
                        <th:block>Na ledě: <th:block th:text="${@util.joinGameNumbersFromRoster(event.onIce)}"></th:block></th:block>
                        <th:block>| Situace: <th:block th:text="${event.situation}"></th:block></th:block>
                    </th:block>

                                        <!-- GoalConceded -->
                                        <th:block th:case="'GoalConceded'">
                        <th:block>Na ledě: <th:block th:text="${@util.joinGameNumbersFromRoster(event.onIce)}"></th:block></th:block>
                        <th:block>| Situace: <th:block th:text="${event.situation}"></th:block></th:block>
                    </th:block>

                                        <!-- Penalty -->
                                        <th:block th:case="'Penalty'">
                        <th:block th:text="'Hráč: ' + ${event.player != null ? event.player?.gameNumber : '--'}"></th:block>
                        <th:block>| Trest: <th:block th:text="${@util.penaltyMinutesToText(event.minutes)}"></th:block></th:block><br>
                        <th:block>Důvod: <th:block th:text="${event.reason != null ? event.reason : '---'}"></th:block></th:block>
                    </th:block>


                    <!-- OpponentPenalty -->
                    <th:block th:case="'OpponentPenalty'">
                    <th:block>Trest: <th:block th:text="${@util.penaltyMinutesToText(event.minutes)}"></th:block></th:block>
                </th:block>
                </td>
            </tr>
            </tbody>
            </th:block>

        </table>
    </div>
    <div class="player-stats">
        <h3>Statistiky hráčů</h3>
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th colspan="5">Zásahy</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <th>Číslo</th>
                    <th>Jméno</th>
                    <th th:each="shots, index : ${gameStats.periodStats}" th:if="${index.index+1 <= game.game.periods}" th:text="${index.index+1}+'.'"></th>
                    <th>PR</th>
                    <th>Celkem</th>
                    <th>OG</th>
                    <th>%</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="goalie:${playerStats.goalkeepers}">
                    <td th:text="${goalie.player.gameNumber}">00</td>
                    <td th:text="${goalie.player.player.name}+' '+${goalie.player.player.surname}">Jméno Příjmení</td>
                    <td th:each="i : ${#numbers.sequence(1, game.game.periods)}" th:text="${goalie.getSavesForPeriod(i) != null ? goalie.getSavesForPeriod(i) : '--'}"></td>                    <td th:text="${goalie.goals}">0</td>
                    <td th:text="${goalie.saves!= null?goalie.saves:'--'}">0</td>
                    <td th:text="${goalie.goals!= null?goalie.goals:'--'}">0</td>
                    <td th:text="${goalie.percentage!= null?goalie.percentage:'--'}">0</td>
                </tr>
            </tbody>
        </table>
        <table>
            <thead>
                <tr>
                    <th>Číslo</th>
                    <th>Jméno</th>
                    <th>G</th>
                    <th>A</th>
                    <th>B</th>
                    <th>+/-</th>
                    <th>TM</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="player:${playerStats.players}">
                    <td th:text="${player.player.gameNumber}">00</td>
                    <td th:text="${player.player.player.name}+' '+${player.player.player.surname}">Jméno Příjmení</td>
                    <td th:text="${player.goals}">0</td>
                    <td th:text="${player.assists}">0</td>
                    <td th:text="${player.goals+player.assists}">0</td>
                    <td  th:text="${player.plus - player.minus}">+-0</td>
                    <td  th:text="${player.penaltyMinutes!=null? player.penaltyMinutes:'0'}">00</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>